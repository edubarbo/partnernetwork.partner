(window.webpackJsonppartnernetwork_partner_5_0_9=window.webpackJsonppartnernetwork_partner_5_0_9||[]).push([[2],{17:function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"i",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"j",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return m})),a.d(t,"g",(function(){return u})),a.d(t,"e",(function(){return d}));var n="UPDATE_PARTNER_DATA",r="UPDATE_PARTNER_DATA_FIELD",i="ADD_SERVICE",c="ADD_SERVICES",s="UPDATE_SERVICE",o="REMOVE_SERVICE",l="ADD_CLIENT",m="ADD_CLIENTS",u="UPDATE_CLIENT",d="REMOVE_CLIENT"},41:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return p}));var n=a(10),r=a(0),i=a.n(r),c=a(54),s=a(30),o=a(17),l=function(e,t){switch(t.type){case o.h:var a=e.partnerData;return Object.assign(Object.assign({},e),{partnerData:Object.assign(Object.assign({},a),t.payload)});case o.i:var n=e.partnerData,r=t.payload,i=r.field,l=r.value,m=Object.assign(Object.assign({},n),Object(s.a)({},i,l));return Object.assign(Object.assign({},e),{partnerData:m});case o.c:var u=e.services,d=t.payload;return Object.assign(Object.assign({},e),{services:[].concat(Object(c.a)(u),[d])});case o.d:return Object.assign(Object.assign({},e),{services:t.payload});case o.j:var p=e.services,g=t.payload,b=Object(c.a)(p);return p.forEach((function(e,t){e.id===g.id&&(b[t]=g)})),Object.assign(Object.assign({},e),{services:b});case o.f:var v=e.services,f=t.payload.id,E=v.filter((function(e){return e.id!==f}));return Object.assign(Object.assign({},e),{services:E});case o.a:var O=e.clients,j=t.payload;return Object.assign(Object.assign({},e),{clients:[].concat(Object(c.a)(O),[j])});case o.b:return Object.assign(Object.assign({},e),{clients:t.payload});case o.g:var h=e.clients,w=t.payload,k=Object(c.a)(h);return h.forEach((function(e,t){e.id===w.id&&(k[t]=w)})),Object.assign(Object.assign({},e),{clients:k});case o.e:var y=e.clients,C=t.payload.id,N=y.filter((function(e){return e.id!==C}));return Object.assign(Object.assign({},e),{clients:N});default:return e}},m={partnerData:{id:"",email:"",website:"",name:"",types:[],regions:[],imgURL:"",description:"",status:""},clients:[],services:[]},u=Object(r.createContext)({state:m,dispatch:function(){}}),d=u.Provider,p=function(e){var t=e.children,a=Object(r.useReducer)(l,m),c=Object(n.a)(a,2),s=c[0],o=c[1];return i.a.createElement(d,{value:{state:s,dispatch:o}},t)}},74:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(0),i=a.n(r),c=a(52),s=a.n(c),o=a(68),l=a.n(o),m=a(53),u=a.n(m),d=a(8),p=a(75),g=a.n(p),b=a(101),v=a(30),f=a(22),E=a(34),O=a.n(E),j=a(20),h=a.n(j),w=a(42),k=a.n(w),y=a(23),C=a.n(y),N=a(45),M=a.n(N),x=a(69),F=a.n(x),I=a(11),D=a(70),S=[{value:"ISV",label:"ISV"},{value:"Agencia / Reseller",label:"Agencia / Reseller"}],R=[{id:"marketing",name:"Marketing",subcategories:[{id:"crm",name:"CRM"},{id:"atendimento-ao-cliente",name:"Atendimento ao cliente"},{id:"influenciador(a)",name:"Influenciador(a)"},{id:"busca-e-sugestoes",name:"Busca e sugestões"},{id:"fotos-e-videos",name:"Fotos e Videos"},{id:"automacao-chatbot-ura",name:"Automação (chatbot/URA)"},{id:"reviews",name:"Reviews"},{id:"design-and-ux",name:"Design & UX"}]},{id:"operacoes-e-fulfillment",name:"Operações e Fulfillment",subcategories:[{id:"inventario-armazenamento",name:"Inventário/Armazenamento"},{id:"logistica-transporte",name:"Logística/Transporte"},{id:"erp-gestao-de-catalogo-inventario",name:"ERP - gestão de catalogo/inventário"}]},{id:"gestao-de-ecommerce",name:"Gestão de Ecommerce",subcategories:[{id:"consultoria",name:"Consultoria"},{id:"treinamento-e-certificacao",name:"Treinamento e Certificação"},{id:"inteligencia-de-dados",name:"Inteligência de Dados"},{id:"servicos-juridicos",name:"Serviços Jurídicos"}]},{id:"servicos-financeiros",name:"Serviços Financeiros",subcategories:[{id:"antifraude",name:"Antifraude"},{id:"servicos-de-fidelidade-cupons-clubes-devolucao",name:"Serviços de fidelidade (cupons / clubes / devolução)"},{id:"seguro",name:"Seguro"},{id:"contabilidade-e-impostos",name:"Contabilidade e Impostos"},{id:"provedor-de-pagamento",name:"Provedor de Pagamento"}]},{id:"marketplaces",name:"Marketplaces",subcategories:[{id:"out",name:"Out"},{id:"in",name:"IN"},{id:"hub",name:"HUB"},{id:"seller-center",name:"Seller Center"}]},{id:"implementacao-e-vendas",name:"Implementação e Vendas",subcategories:[{id:"full-commerce",name:"Full Commerce"},{id:"integracao-b2b-b2c-custom-apps-mobile-apps",name:"Integração (B2B/B2C/Custom apps/Mobile apps)"},{id:"implementador-desenvolvedor",name:"Implementador / Desenvolvedor"}]}],A=a(71),L=a.n(A),U=function(){return i.a.createElement("div",{className:"ml4 flex items-center"},i.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{clipPath:"url(#clip0)"},i.a.createElement("path",{d:"M13.7262 4.39069L8.00211 10.1147L2.27804 4.39069C2.02657 4.14782 1.68977 4.01342 1.34017 4.01646C0.990566 4.0195 0.656145 4.15972 0.408931 4.40694C0.161717 4.65415 0.0214904 4.98856 0.0184525 5.33816C0.0154146 5.68775 0.149809 6.02456 0.392689 6.27603L7.05944 12.9427C7.30948 13.1927 7.64856 13.3331 8.00211 13.3331C8.35567 13.3331 8.69475 13.1927 8.94479 12.9427L15.6115 6.27603C15.7389 6.15303 15.8405 6.0059 15.9103 5.84323C15.9802 5.68056 16.017 5.5056 16.0185 5.32856C16.0201 5.15152 15.9863 4.97595 15.9193 4.81209C15.8523 4.64823 15.7533 4.49936 15.6281 4.37417C15.5029 4.24898 15.354 4.14997 15.1901 4.08293C15.0263 4.01589 14.8507 3.98215 14.6737 3.98369C14.4966 3.98523 14.3217 4.02201 14.159 4.09189C13.9963 4.16177 13.8492 4.26335 13.7262 4.39069Z",fill:"#142032"})),i.a.createElement("defs",null,i.a.createElement("clipPath",{id:"clip0"},i.a.createElement("rect",{width:"16.0002",height:"16",fill:"white"})))))},_=function(e){var t=e.value,a=e.options,n=e.onChange,r=e.errorMessage,c=e.multi,s=void 0===c||c,o=e.placeholder,l=void 0===o?"Select...":o;return i.a.createElement("div",{className:"select-input-container"},i.a.createElement(L.a,{value:t,multi:s,options:a,onChange:n,placeholder:l,errorMessage:r,components:{DropdownIndicator:U}}))},q=function(e){var t=e.id,a=e.error,c=e.imgURL,s=e.onImageChange,o=Object(r.useState)(""),l=Object(n.a)(o,2),m=l[0],u=l[1];Object(r.useEffect)((function(){c&&c!==m&&u(c)}),[c]);var d=["upload-image"];return a&&d.push("upload-image--error"),i.a.createElement("div",{className:d.join(" ")},i.a.createElement("label",{htmlFor:t,className:"upload-image-input-label"},m&&i.a.createElement("img",{src:m,alt:"preview"})),i.a.createElement("input",{id:t,type:"file",accept:".jpg,jpeg,.png",onChange:function(e){var t=e.target.files;if(0!==(null==t?void 0:t.length)){var a=t[0],n=new FileReader;n.onload=function(){var e=n.result;u(e),s&&s(e,a)},n.readAsDataURL(a)}else u("")},className:"upload-image-input"}))},$=function(e){var t=e.id,a=e.title,n=e.error,r=e.imgURL,c=e.errorMessage,s=e.description,o=e.onImageChange;return i.a.createElement("div",{className:"upload-image-container"},i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"mr5 mr7-l"},i.a.createElement(q,{onImageChange:o,error:n,id:t,imgURL:r})),i.a.createElement("div",{className:"flex flex-column justify-center w-100"},i.a.createElement("h2",{className:"ma0 mb3 upload-image-container-title"},a),s&&i.a.createElement("p",{className:"ma0 upload-image-container-description"},s))),c&&i.a.createElement("div",{className:"vtex-input__error c-danger t-small mt3 lh-title"},c))},P=a(41),T=a(17),V=function(){var e=Object(r.useContext)(P.b),t=e.state.partnerData,a=e.dispatch;return{partnerData:t,updateField:function(e){var t=e.field,n=e.value;a({type:T.i,payload:{field:t,value:n}})},updateData:function(e){a({type:T.h,payload:e})}}};function B(){var e=Object(f.a)(['\n  mutation savePartner($input: PartnerInput) {\n    partner: savePartner(input: $input)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      email\n      # emailTecnico\n      # emailMarketing\n      # emailFinanceiro\n      status\n      imgURL\n      website\n      types\n      regions\n      description\n    }\n  }\n']);return B=function(){return e},e}function z(){var e=Object(f.a)(['\n  query getPartner($account: String) {\n    partner(account: $account)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      email\n      # emailTecnico\n      # emailMarketing\n      # emailFinanceiro\n      status\n      imgURL\n      website\n      types\n      regions\n      description\n      categories {\n        id\n        name\n      }\n      subcategories {\n        categoryID\n        subcategories {\n          id\n          name\n        }\n      }\n    }\n  }\n']);return z=function(){return e},e}var J,W=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},H=["Argentina","Brasil","Chile","Colômbia","Romênia","Estados Unidos"].map((function(e){return{label:e,value:e}})),Z=Object(I.gql)(z()),G=Object(I.gql)(B()),Q=R.reduce((function(e,t){return Object.assign(Object.assign({},e),Object(v.a)({},t.id,t.subcategories.reduce((function(e,t){return Object.assign(Object.assign({},e),Object(v.a)({},t.id,{checked:!1,label:t.name}))}),{})))}),{}),X=function(){var e=Object(D.useRuntime)().account,t=Object(I.useQuery)(Z,{variables:{account:e}}),a=t.data,c=t.loading,s=Object(I.useMutation)(G),o=Object(n.a)(s,2),l=o[0],m=o[1],u=m.data,p=m.loading,f=V(),E=f.partnerData,j=f.updateField,w=f.updateData,y=Object(r.useState)(!0),N=Object(n.a)(y,2),x=N[0],A=N[1],L=Object(r.useState)({}),U=Object(n.a)(L,2),q=U[0],P=U[1],T=Object(d.useIntl)(),B=Object(r.useState)(!1),z=Object(n.a)(B,2),X=z[0],Y=z[1],K=Object(r.useState)(Q),ee=Object(n.a)(K,2),te=ee[0],ae=ee[1],ne=function(e){if(e in q){var t=Object.assign({},q);delete t[e],P(t)}},re=function(e,t){ne(t),j({field:t,value:e})},ie=function(e,t){ne(t);var a=Array.isArray(e)?e.map((function(e){return e.value})):e.value;j({field:t,value:a})},ce=function(e){var t,a=e.showErrors,n=void 0===a||a,r={};""===E.name?r.name=T.formatMessage({id:"partnernetwork.app.errors.required"}):E.name.length<3&&(r.name=T.formatMessage({id:"partnernetwork.app.errors.name"})),""===E.description?r.description=T.formatMessage({id:"partnernetwork.app.errors.required"}):E.description.length<200&&(r.description=T.formatMessage({id:"partnernetwork.app.errors.description"})),""===E.imgURL&&(r.imgURL=T.formatMessage({id:"partnernetwork.app.errors.required"})),""===E.website&&(r.website=T.formatMessage({id:"partnernetwork.app.errors.required"})),0===E.regions.length&&(r.regions=T.formatMessage({id:"partnernetwork.app.errors.required"})),0===E.types.length&&(r.types=T.formatMessage({id:"partnernetwork.app.errors.required"})),0===E.email.length?r.email=T.formatMessage({id:"partnernetwork.app.errors.required"}):(t=E.email,/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)||(r.email=T.formatMessage({id:"partnernetwork.app.errors.email"})));var i="{}"===JSON.stringify(r);return!i&&n&&P(r),i},se=function(){var e=[],t=[];return Object.keys(te).forEach((function(a){var r=te[a],i=Object.entries(r).filter((function(e){return Object(n.a)(e,2)[1].checked})).map((function(e){var t=Object(n.a)(e,2);return{id:t[0],name:t[1].label}}));if(0!==i.length){var c=R.find((function(e){return e.id===a}));c&&e.push({id:a,name:c.name}),t.push({categoryID:a,subcategories:i})}})),{selectedCategories:e,selectedSubcategories:t}},oe=function(){var t=Object(b.a)(g.a.mark((function t(){var a,n,r,i,c,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=ce({showErrors:!0}),n=se(),r=n.selectedCategories,i=n.selectedSubcategories,a){t.next=4;break}return t.abrupt("return");case 4:if(0!==r.length){t.next=7;break}return Y(!0),t.abrupt("return");case 7:E.id,E.status,E.imgURL,c=W(E,["id","status","imgURL"]),s=J?{imgFile:J}:{},l({variables:{input:Object.assign(Object.assign(Object.assign({},s),c),{account:e,categories:r,subcategories:i})}});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){if(null==a?void 0:a.partner){var e=a.partner,t=e.categories,n=e.subcategories,r=W(e,["categories","subcategories"]);ae((function(e){var a=t.reduce((function(e,t){var a=n.find((function(e){return e.categoryID===t.id})),r=te[t.id];return Object.assign(Object.assign({},e),Object(v.a)({},t.id,a.subcategories.reduce((function(e,t){return Object.assign(Object.assign({},e),Object(v.a)({},t.id,{checked:!0,label:t.name}))}),Object.assign({},r))))}),{});return Object.assign(Object.assign({},e),a)})),w(r)}}),[a]),Object(r.useEffect)((function(){u&&u.partner&&w(u.partner)}),[u]),Object(r.useEffect)((function(){X&&(0!==se().selectedCategories.length&&Y(!1))}),[te]);var le=T.formatMessage({id:"partnernetwork.app.input-company-name.placeholder"}),me=T.formatMessage({id:"partnernetwork.app.input-website.placeholder"}),ue=T.formatMessage({id:"partnernetwork.app.input-description.placeholder"}),de=E.regions.map((function(e){return H.find((function(t){return t.value===e}))})).filter(Boolean),pe=E.types.map((function(e){return S.find((function(t){return t.value===e}))})).filter(Boolean);if(c)return i.a.createElement(C.a,null);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"mb6"},"APPROVED"===E.status&&i.a.createElement(M.a,{type:"success"},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.status-approved"})),"PENDING"===E.status&&i.a.createElement(i.a.Fragment,null,x&&i.a.createElement(M.a,{type:"warning",onClose:function(){A(!1)}},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.status-waiting"})),i.a.createElement(M.a,{type:"warning"},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.status-pending"})))),i.a.createElement("div",{className:"mb8"},i.a.createElement($,{id:"company-logo",error:!!q.imgURL,imgURL:E.imgURL,errorMessage:q.imgURL,title:E.name||i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.company-name"}),description:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.upload-image-recommendation"}),onImageChange:function(e,t){t&&(J=t),re(e,"imgURL")}})),i.a.createElement("div",{className:"mb7 flex flex-column flex-row-l"},i.a.createElement("div",{className:"w-100 mb7 mb0-l mr7-l"},i.a.createElement(O.a,{required:!0,name:"name",value:E.name,error:q.name,errorMessage:q.name,onChange:function(e){var t=e.target.value;re(t,"name")},placeholder:le})),i.a.createElement("div",{className:"w-100"},i.a.createElement("div",{className:"select-input-container"},i.a.createElement(_,{multi:!0,options:H,errorMessage:q.types,value:de,onChange:function(e){return ie(e,"regions")},placeholder:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.select-region.placeholder"})})))),i.a.createElement("div",{className:"mb7 flex flex-column flex-row-l"},i.a.createElement("div",{className:"w-100 mb7 mb0-l mr7-l"},i.a.createElement("div",{className:"select-input-container"},i.a.createElement(_,{multi:!0,options:S,errorMessage:q.types,value:pe,onChange:function(e){return ie(e,"types")},placeholder:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.select-partner-type.placeholder"})}))),i.a.createElement("div",{className:"w-100"},i.a.createElement(O.a,{required:!0,type:"url",value:E.website,error:q.website,errorMessage:q.website,onChange:function(e){var t=e.target.value;re(t,"website")},placeholder:me}))),i.a.createElement("div",{className:"mb7 mb8-l flex"},i.a.createElement("div",{className:"w-100"},i.a.createElement(O.a,{required:!0,type:"email",value:E.email,error:q.email,errorMessage:q.email,onChange:function(e){var t=e.target.value;re(t,"email")},placeholder:"Email*"}))),i.a.createElement("div",{className:"mb7 about-the-partner"},i.a.createElement("h3",{className:"t-heading-3"},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.about-the-partner"})),E.description.length<200?i.a.createElement("small",{className:"subtitle"},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.about-the-partner-minimum"}),": ",E.description.length,"/200"):null,i.a.createElement(k.a,{required:!0,resize:"none",name:"description",value:E.description,error:q.description,onChange:function(e){var t=e.target.value;re(t,"description")},errorMessage:q.description,placeholder:ue})),i.a.createElement("div",{className:"mb7 categories-and-subcategories"},i.a.createElement("h3",{className:"t-heading-3"},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.categories-and-subcategories-title"})),i.a.createElement("small",null,i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.categories-and-subcategories-subtitle"})),R.map((function(e){var t=te[e.id];return i.a.createElement("div",{className:"mb6",key:e.id},i.a.createElement(F.a,{value:"simple",id:e.id,name:e.id,label:e.name,checkedMap:t,onGroupChange:function(t){ae((function(a){return Object.assign(Object.assign({},a),Object(v.a)({},e.id,t))}))}}))})),X&&i.a.createElement(M.a,{type:"error"},"You need to select at lest 1 category and subcategory.")),i.a.createElement("div",{className:"actions flex flex-column-reverse flex-row-l justify-end-l"},i.a.createElement("div",{className:"mb3 mb0-l button-save-container"},i.a.createElement(h.a,{onClick:oe,disabled:!ce({showErrors:!1})||p},i.a.createElement(i.a.Fragment,null,p?i.a.createElement(C.a,{color:"#FFF",size:20}):i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-save"}))))))},Y=function(){var e=Object(r.useContext)(P.b),t=e.state.services,a=e.dispatch;return{services:t,addService:function(e){a({type:T.c,payload:e})},addServices:function(e){a({type:T.d,payload:e})},updateService:function(e){a({type:T.j,payload:e})},removeService:function(e){a({type:T.f,payload:{id:e}})}}};function K(){var e=Object(f.a)(["\n  mutation createService($partnerID: ID, $input: ServiceInput) {\n    newService: createService(partnerID: $partnerID, input: $input) {\n      id\n      name\n      isActive\n      description\n    }\n  }\n"]);return K=function(){return e},e}var ee=Object(I.gql)(K()),te=function(e){var t=e.setShowForm,a=V().partnerData,c=Y().addService,s=Object(r.useState)({name:"",description:"",isActive:!0}),o=Object(n.a)(s,2),l=o[0],m=o[1],u=Object(I.useMutation)(ee),p=Object(n.a)(u,2),g=p[0],b=p[1],f=b.data,E=b.loading,j=Object(d.useIntl)(),w=Object(r.useState)({}),y=Object(n.a)(w,2),N=y[0],M=y[1],x=function(e){var t=e.target;if(t.name in N){var a=Object.assign({},N);delete a[t.name],M(a)}m((function(e){return Object.assign(Object.assign({},e),Object(v.a)({},t.name,t.value))}))},F=j.formatMessage({id:"partnernetwork.app.input-service-name.placeholder"}),D=j.formatMessage({id:"partnernetwork.app.input-service-description.placeholder"});return Object(r.useEffect)((function(){f&&(c(f.newService),t(!1))}),[f]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"mb4 mb7-l flex"},i.a.createElement(O.a,{required:!0,id:"name",name:"name",value:l.name,onChange:x,error:N.name,errorMessage:N.name,placeholder:F})),i.a.createElement("div",{className:"mb7 about-the-service"},i.a.createElement("h3",{className:"t-heading-3"},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.about-the-service"})),i.a.createElement(k.a,{required:!0,resize:"none",id:"description",name:"description",value:l.description,onChange:x,error:N.description,errorMessage:N.description,placeholder:D})),i.a.createElement("div",{className:"actions flex flex-column-reverse flex-row-l justify-end-l"},i.a.createElement("div",{className:"mr6-l button-cancel-container"},i.a.createElement(h.a,{onClick:function(){return t(!1)},disabled:E},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-cancel"}))),i.a.createElement("div",{className:"mb3 mb0-l button-save-container"},i.a.createElement(h.a,{onClick:function(){var e={},t=l.name,n=l.description;""===t?e.name=j.formatMessage({id:"partnernetwork.app.errors.required"}):t.length<3&&(e.name=j.formatMessage({id:"partnernetwork.app.errors.name"})),""===n?e.description=j.formatMessage({id:"partnernetwork.app.errors.required"}):n.length<10&&(e.description=j.formatMessage({id:"partnernetwork.app.errors.description"})),"{}"===JSON.stringify(e)?g({variables:{partnerID:a.id,input:l}}):M(e)},disabled:E},i.a.createElement(i.a.Fragment,null,E?i.a.createElement(C.a,{color:"#FFF",size:20}):i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-save"}))))))},ae=function(e){var t=e.children;return i.a.createElement("section",{className:"table mb7 mb8-l"},t)},ne=a(49),re=a.n(ne),ie=function(e){var t=e.name,a=e.imgURL,n=e.isActive,r=e.description,c=e.onCheckboxChange,s=e.onButtonRemoveClick,o=e.showEmptyImage,l=void 0===o||o;return i.a.createElement("div",{className:"table-row"},i.a.createElement("div",{className:"mr5 mr7-l"},i.a.createElement(re.a,{id:t,name:t,checked:n,onChange:c})),i.a.createElement("div",{className:"flex w-100 items-center"},!a&&l&&i.a.createElement("span",{className:"table-row__empty-image mr5"}),a&&i.a.createElement("div",{className:"table-row__image-container mr5"},i.a.createElement("img",{src:a,alt:t,className:"table-row__image"})),i.a.createElement("div",{className:"table-row__group"},i.a.createElement("h3",{className:"table-row__name"},t),i.a.createElement("p",{className:"table-row__short-description"},r))),i.a.createElement("div",{className:"ml5 ml7-l"},i.a.createElement("button",{className:"table-row__button-remove",onClick:s},i.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M5 7H19",stroke:"#142032",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M18 7V18C18 19.105 17.105 20 16 20H8C6.895 20 6 19.105 6 18V7",stroke:"#142032",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M15 3.75H9",stroke:"#142032",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M10 11V16",stroke:"#142032",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M14 11V16",stroke:"#142032",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))))};function ce(){var e=Object(f.a)(['\n  mutation updateService($id: ID, $input: ServiceInput) {\n    updateService(id: $id, input: $input)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      isActive\n      description\n    }\n  }\n']);return ce=function(){return e},e}function se(){var e=Object(f.a)(['\n  mutation saveServices($partnerID: ID, $services: [ServiceInput!]) {\n    saveServices(partnerID: $partnerID, services: $services)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      isActive\n      description\n    }\n  }\n']);return se=function(){return e},e}function oe(){var e=Object(f.a)(['\n  query getServices($partnerID: ID) {\n    services(partnerID: $partnerID)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      isActive\n      description\n    }\n  }\n']);return oe=function(){return e},e}var le=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},me=Object(I.gql)(oe()),ue=Object(I.gql)(se()),de=Object(I.gql)(ce()),pe=function(e){var t=e.setShowForm,a=V().partnerData,c=Y(),s=c.services,o=c.addServices,l=c.removeService,m=c.updateService,u=Object(I.useQuery)(me,{variables:{partnerID:a.id}}),p=u.data,g=u.loading,b=Object(I.useMutation)(ue),v=Object(n.a)(b,2),f=v[0],E=v[1].loading,O=Object(I.useMutation)(de),j=Object(n.a)(O,1)[0];return Object(r.useEffect)((function(){!p||!p.services||s.length>0||o(p.services)}),[p]),g?i.a.createElement("div",{className:"flex justify-center ma6"},i.a.createElement(C.a,{color:"#f71963",size:50})):i.a.createElement(i.a.Fragment,null,s&&s.length>0&&i.a.createElement(ae,null,s.map((function(e){return i.a.createElement(ie,{key:e.id,name:e.name,showEmptyImage:!1,isActive:e.isActive,description:e.description,accountName:"",onButtonRemoveClick:function(){var t=e.id,a=le(e,["id"]);j({variables:{id:t,input:Object.assign(Object.assign({},a),{isRemoved:!0})}}),l(t)},onCheckboxChange:function(t){var a=t.target.checked;m(Object.assign(Object.assign({},e),{isActive:a}))}})}))),i.a.createElement("div",{className:"actions flex flex-column flex-row-l justify-between-l"},i.a.createElement("div",{className:"button-add-container mb4 mb0-l w-auto-l"},s.length<5&&i.a.createElement(h.a,{onClick:function(){return t(!0)}},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-add-service"}))),i.a.createElement("div",{className:"actions flex flex-column-reverse flex-row-l justify-end-l"},s.length>0&&i.a.createElement("div",{className:"mb4 mb0-l button-save-container"},i.a.createElement(h.a,{onClick:function(){f({variables:{services:s,partnerID:a.id}})},disabled:E},i.a.createElement(i.a.Fragment,null,E?i.a.createElement(C.a,{color:"#FFF",size:20}):i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-save"})))))))},ge=function(e){var t=e.children;return i.a.createElement("h2",{className:"title"},t)},be=function(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],c=t[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge,null,i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.services-title"})),!a&&i.a.createElement(pe,{setShowForm:c}),a&&i.a.createElement(te,{setShowForm:c}))},ve=function(){var e=Object(r.useContext)(P.b),t=e.state.clients,a=e.dispatch;return{clients:t,addClient:function(e){a({type:T.a,payload:e})},addClients:function(e){a({type:T.b,payload:e})},updateClient:function(e){a({type:T.g,payload:e})},removeClient:function(e){a({type:T.e,payload:{id:e}})}}};function fe(){var e=Object(f.a)(["\n  mutation createClient($partnerID: ID, $input: ClientInput) {\n    newClient: createClient(partnerID: $partnerID, input: $input) {\n      id\n      name\n      imgURL\n      isActive\n      description\n      accountName\n    }\n  }\n"]);return fe=function(){return e},e}var Ee,Oe=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},je=Object(I.gql)(fe()),he=function(e){var t=e.setShowForm,a=V().partnerData,c=ve().addClient,s=Object(r.useState)({name:"",imgURL:"",description:"",isActive:!0,accountName:""}),o=Object(n.a)(s,2),l=o[0],m=o[1],u=Object(I.useMutation)(je),p=Object(n.a)(u,2),g=p[0],b=p[1],f=b.data,E=b.loading,j=Object(d.useIntl)(),w=Object(r.useState)({}),y=Object(n.a)(w,2),N=y[0],M=y[1],x=Object(r.useState)(!1),F=Object(n.a)(x,2),D=F[0],S=F[1],R=function(e){var t=e.target;if(t.name in N){var a=Object.assign({},N);delete a[t.name],M(a)}m((function(e){return Object.assign(Object.assign({},e),Object(v.a)({},t.name,t.value))}))},A=j.formatMessage({id:"partnernetwork.app.input-client-name.placeholder"}),L=j.formatMessage({id:"partnernetwork.app.input-client-accountName.placeholder"}),U=j.formatMessage({id:"partnernetwork.app.input-client-description.placeholder"});return Object(r.useEffect)((function(){f&&(c(f.newClient),t(!1))}),[f]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"mb8"},i.a.createElement($,{id:"client-logo",onImageChange:function(e,t){t&&(Ee=t),m((function(t){return Object.assign(Object.assign({},t),{imgURL:e})}))},title:l.name||i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.input-client-name.placeholder"}),description:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.upload-image-recommendation"})})),i.a.createElement("div",{className:"flex"},i.a.createElement(O.a,{required:!0,id:"name",name:"name",value:l.name,onChange:R,error:N.name,errorMessage:N.name,placeholder:A})),i.a.createElement("div",{className:"flex mt4"},i.a.createElement(O.a,{required:!0,id:"accountName",name:"accountName",value:l.accountName,onChange:R,error:N.accountName,errorMessage:N.accountName,placeholder:L})),i.a.createElement("div",{className:"mt4 mb4 mb7-l flex ".concat(N.clientApproved?"check-error":"")},i.a.createElement(re.a,{checked:D,id:"clientApproved",label:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.checkClientApproved"}),name:"clientApproved",onChange:function(){return S(!D)},value:D,required:!0})),i.a.createElement("div",{className:"mb7 about-the-client"},i.a.createElement("h3",{className:"t-heading-3"},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.about-the-client"})),i.a.createElement(k.a,{required:!0,resize:"none",id:"description",name:"description",value:l.description,onChange:R,error:N.description,errorMessage:N.description,placeholder:U})),i.a.createElement("div",{className:"actions flex flex-column-reverse flex-row-l justify-end-l"},i.a.createElement("div",{className:"mr6-l button-cancel-container"},i.a.createElement(h.a,{onClick:function(){return t(!1)},disabled:E},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-cancel"}))),i.a.createElement("div",{className:"mb3 mb0-l button-save-container"},i.a.createElement(h.a,{onClick:function(){var e={},t=l.name,n=l.description,r=l.accountName;if(D||(e.clientApproved=j.formatMessage({id:"partnernetwork.app.errors.required"})),""===t?e.name=j.formatMessage({id:"partnernetwork.app.errors.required"}):t.length<3&&(e.name=j.formatMessage({id:"partnernetwork.app.errors.name"})),""===r?e.accountName=j.formatMessage({id:"partnernetwork.app.errors.required"}):r.length<3&&(e.accountName=j.formatMessage({id:"partnernetwork.app.errors.name"})),""===n?e.description=j.formatMessage({id:"partnernetwork.app.errors.required"}):n.length<10&&(e.description=j.formatMessage({id:"partnernetwork.app.errors.description"})),"{}"===JSON.stringify(e)){l.imgURL;var i=Oe(l,["imgURL"]);g({variables:{partnerID:a.id,input:Object.assign(Object.assign({},i),{imgFile:Ee})}})}else M(e)},disabled:E},i.a.createElement(i.a.Fragment,null,E?i.a.createElement(C.a,{color:"#FFF",size:20}):i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-save"}))))))};function we(){var e=Object(f.a)(['\n  mutation updateClient($id: ID, $input: ClientInput) {\n    updateClient(id: $id, input: $input)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      imgURL\n      isActive\n      description\n    }\n  }\n']);return we=function(){return e},e}function ke(){var e=Object(f.a)(['\n  mutation saveClients($partnerID: ID, $clients: [ClientInput!]) {\n    saveClients(partnerID: $partnerID, clients: $clients)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      imgURL\n      isActive\n      description\n      accountName\n    }\n  }\n']);return ke=function(){return e},e}function ye(){var e=Object(f.a)(['\n  query getClients($partnerID: ID) {\n    clients(partnerID: $partnerID)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      imgURL\n      isActive\n      description\n      accountName\n    }\n  }\n']);return ye=function(){return e},e}var Ce=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},Ne=Object(I.gql)(ye()),Me=Object(I.gql)(ke()),xe=Object(I.gql)(we()),Fe=function(e){var t=e.setShowForm,a=V().partnerData,c=ve(),s=c.clients,o=c.addClients,l=c.removeClient,m=c.updateClient,u=Object(I.useQuery)(Ne,{variables:{partnerID:a.id}}),p=u.data,g=u.loading,b=Object(I.useMutation)(Me),v=Object(n.a)(b,2),f=v[0],E=v[1].loading,O=Object(I.useMutation)(xe),j=Object(n.a)(O,1)[0];return Object(r.useEffect)((function(){!p||!p.clients||s.length>0||o(p.clients)}),[p]),g?i.a.createElement("div",{className:"flex justify-center ma6"},i.a.createElement(C.a,{color:"#f71963",size:50})):i.a.createElement(i.a.Fragment,null,s&&s.length>0&&i.a.createElement(ae,null,s.map((function(e){return i.a.createElement(ie,{key:e.id,name:e.name,imgURL:e.imgURL,isActive:e.isActive,description:e.description,accountName:e.accountName,onButtonRemoveClick:function(){var t=e.id,a=(e.imgURL,Ce(e,["id","imgURL"]));j({variables:{id:t,input:Object.assign(Object.assign({},a),{isRemoved:!0})}}),l(t)},onCheckboxChange:function(t){var a=t.target.checked;m(Object.assign(Object.assign({},e),{isActive:a}))}})}))),i.a.createElement("div",{className:"actions flex flex-column flex-row-l justify-between-l"},i.a.createElement("div",{className:"button-add-container mb4 mb0-l w-auto-l"},s.length<5&&i.a.createElement(h.a,{onClick:function(){return t(!0)}},i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-add-client"}))),i.a.createElement("div",{className:"actions flex flex-column-reverse flex-row-l justify-end-l"},s.length>0&&i.a.createElement("div",{className:"mb4 mb0-l button-save-container"},i.a.createElement(h.a,{onClick:function(){var e=s.map((function(e){e.imgURL;return Ce(e,["imgURL"])}));f({variables:{clients:e,partnerID:a.id}})},disabled:E},i.a.createElement(i.a.Fragment,null,E?i.a.createElement(C.a,{color:"#FFF",size:20}):i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.button-save"})))))))},Ie=function(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],c=t[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge,null,i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.clients-title"})),!a&&i.a.createElement(Fe,{setShowForm:c}),a&&i.a.createElement(he,{setShowForm:c}))};t.default=function(){var e=V().partnerData,t=Object(r.useState)(0),a=Object(n.a)(t,2),c=a[0],o=a[1];return i.a.createElement(l.a,{fullWidth:!0},i.a.createElement(s.a,{active:0===c,onClick:function(){return o(0)},label:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.tab.partnerdata"})},i.a.createElement(u.a,{variation:"full"},i.a.createElement(X,null))),i.a.createElement(s.a,{active:1===c,disabled:!e.id,onClick:function(){return o(1)},label:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.tab.services"})},i.a.createElement(u.a,{variation:"full"},i.a.createElement(be,null))),i.a.createElement(s.a,{active:2===c,disabled:!e.id,onClick:function(){return o(2)},label:i.a.createElement(d.FormattedMessage,{id:"partnernetwork.app.tab.clients"})},i.a.createElement(u.a,{variation:"full"},i.a.createElement(Ie,null))))}}}]);